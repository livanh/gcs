#!/bin/sh

# TODO: remove dependency on i3-style if possible

I3_CONFIG_FILE="$HOME/.config/i3/config"
if [ -f "${I3_CONFIG_FILE}" ]; then
    echo "* setting colors for i3 window manager..."
    
    if [ -f "${MODULES_DIR}/i3wm-template.yaml" ]; then
	tmpfile="$(mktemp --suffix .yaml)"
	cp "${MODULES_DIR}/i3wm-template.yaml" "${tmpfile}"
	sed -i "s/\$selected_bg_color/$selected_bg_color/" "${tmpfile}"
	sed -i "s/\$selected_fg_color/$selected_fg_color/" "${tmpfile}"
	sed -i "s/\$text_color/$text_color/" "${tmpfile}"
	sed -i "s/\$urgent_color/$urgent_color/" "${tmpfile}"
	sed -i "s/\$bg_color/$bg_color/" "${tmpfile}"
	sed -i "s/\$unfocused_color/$unfocused_color/" "${tmpfile}"
	i3-style "${tmpfile}" -o "${I3_CONFIG_FILE}" -r
	rm "${tmpfile}"
    else
	echo "  Error: template not found!"
    fi
    
fi
