#!/bin/sh

# TODO: handle profiles
# TODO: set color palette

terminator_set_value_default_profile() {
    
    local key="$1"
    local value="$2"
    local file="$3"
    
    sed -i "
    /\[profiles\]/{
    N
        /\[\[default\]\]/{
        : loop
        N
        s/${key}\ =.*/${key}\ =\"${value}\"/
        t endloop
        /\[\[default\]\].*\[\[/{
            s/\[\[default\]\]/\[\[default\]\]\n    ${key} = \"${value}\"/
            b endloop
        }
        b loop
        : endloop
        }

    }

    " "${file}"
    
} 

TERMINATOR_CONFIG_FILE="$HOME/.config/terminator/config"
if [ -f "${TERMINATOR_CONFIG_FILE}" ]; then
    printf "* Setting colors for terminator..."
    terminator_set_value_default_profile "background_color" "${terminal_bg_color}" "${TERMINATOR_CONFIG_FILE}"
    terminator_set_value_default_profile "foreground_color" "${terminal_fg_color}" "${TERMINATOR_CONFIG_FILE}"
    terminator_set_value_default_profile "cursor_color"     "${terminal_bg_color}" "${TERMINATOR_CONFIG_FILE}"
    printf " done.\n"
fi
